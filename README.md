
# 시네마그린 : 영화 예매 서비스

소속/기관명 : 팀프로젝트

프로젝트 기간 : 2023.07. ~ 2023.08.

프로젝트 내용 : api를 이용해 매일 박스오피스 상위 10위의 영화들에 대한 정보를 추출하고 이 영화들에 대한 예매 서비스를 제공하는 것이 목적이었고 저는 회원(user)파트 전부와 게시판(blog) 파트의 일부를 담당하여 진행 했습니다.
https://github.com/bigshotkjh/cinemagreen
## 서비스 구조
![image](https://github.com/user-attachments/assets/326c7f92-233f-4f08-b6d5-33e103ee9b43)


## 개발 환경
![스크린샷 2024-09-24 142258](https://github.com/user-attachments/assets/3dded18d-2601-47c5-a527-abedfbf9c102)

## ERD
![스크린샷 2024-09-24 142521](https://github.com/user-attachments/assets/f6046a84-7ee3-445e-8dbe-9ad2e7cdbe39)


## 구현 기능

### 회원 가입 페이지
  1. ajax이용한 이메일 중복체크와 인증코드 받기.
     - DB의 기존 이메일과의 중복체크하여 발송 및 비교 확인.
     - 인증코드는 서비스단에서 랜덤한 6자리 문자 만들어 네이버 SMTP서버 이용.
  2. 비밀번호 확인, DB에 넣기전에 서비스단에서의 비밀번호 암호화.
  3. DB에 넣기전에 회원 이름 크로스 사이트 스크립팅 처리.
  4. 카카오 주소 API 이용하여 주소입력 받기.
  5. 필수 입력사항 미입력시 가입 버튼 비활성화와 미입력 혹은 형식에 맞지 않는 입력 사항 화면에 표시.
  6. 각 입력 사항들 정규식으로 형식 강제.
  7. 네이버 API 이용해서 필요한 회원정보를 가져와서 간편 인증 및 가입 구현.
  8. 회원 가입시 등급생성.
  9. 영화 예매시 회원 나이에 따라 접근 할 수 있는 등급을 나누기 위해 서비스단에서의 회원의 생년월일을 이용해 만나이 계산.

### 로그인 페이지

  1. Cookie를 이용해 사용자 편의를 위한 이메일 저장 체크박스.
  2. ajax와 서비스단에서 마지막 비밀번호 변경일로 부터 90일 간격으로 비밀번호 변경 권유.
  3. admin인 로그인 시 회원번호를 확인해 분류.
  4. 비밀번호 찾기.
     - 이메일로 인증코드 받아 인증하는 형식으로 새로운 비밀번호를 입력해서 DB에 업데이트 하는 형식.
  5. 이메일 찾기.
     - 휴대전화 번호를 입력받아 DB에서 비교하여 이메일 앞6자리와 그 외의 부분은 *로 가려서 표기해 보여주는 방식.
  6. 네이버 간편 로그인.
  7. 인터셉터 사용하여 로그인한 상태로 접근해야 할 페이지들에 접근을 제한 함.

### 회원 마이 페이지
![스크린샷 2024-08-13 124514](https://github.com/user-attachments/assets/9a2293c5-ecb3-4908-9c2e-cb2346001c60)

  1. 프로필사진.
     - 기본 프로필사진 등록 / 변경.
     - 무비포스트 작성시 회원프로필 적용.
  2. 개인 정보 업데이트 형식으로 수정.
  3. 회원등급 변경 및 표시.
     - 6개월간의 영화예매 결제액으로 등급 업데이트.
  4. 비밀번호 변경.
     - 현재 비밀번호 입력으로 DB와 비교 체크 후 새로운 비밀번호로 업데이트.
  5. 예매내역 리스트와 무비포스트리스트 페이징 기능.
     - ajax와 페이징유틸을 따로 만들어 사용.
  6. 예매내역 리스트.
     - 회원이 예매내역 리스트에 간단한 정보와 오늘 날짜와 비교하여 상영 전/후 표시.
     - 클릭시 해당 티켓 내역에 대해 modal 사용해 각종 정보를 보여주는 상세 내역표시. (제목, 상영시간, 좌석, 러닝타임, 관람등급, 예매일 , 관람인원, 결제수단, 결제금액, 결제상태, 결제취소상태.)
     - 예매 취소 기능 : ajax와 서비스단에서 상영시작시간과 현재시간을 비교하여 취소 가능 여부 판단.
  7. 본인 작성 무비포스트 리스트 표시 / 해당 무비포스트로 이동 / 삭제.
     - 제목, 작성일, 조회수, 좋아요 횟수 표시.
     - Mapper 쿼리문에 정렬기준을 변수로 사용하여 최신, 좋아요, 조회수순 으로 정렬 기능.
  8. 회원 만 나이 계산 / 업데이트. -생일자에게 생일축하 메일 발송.
  9. 탈퇴.

### 무비 포스트 페이지

  1. 무비 포스트의 조회수 기능.
     - 회원번호 이용하여 컨트롤러 단에서 작성자 본인이 조회시 조회수 올리는 서비스를 건너뛰게 만들어 초회수가 올라가지 않게 함.
  2. 무비 포스트의 좋아요 기능.
     - 회원번호 이용하여 작성자 본인은 좋아요를 누를 수 없게 좋아요 버튼을 숨김.
  3. 작성자 프로필 표시.
     
### 그 외의 기능들

  - 회원 생일 축하 메세지와 할인 쿠폰 메일로 보내기 & 회원 만나이 업데이트.
     - 하루 한번 자정에 작동하는 스케쥴러 만들어서 해당일에 생일자들에게 메일 보내고 해당 회원의 만나이를 업데이트한다.
